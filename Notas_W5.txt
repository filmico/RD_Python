Para Continuar:
================
Week 5

W5\Exceptions\test01.py

https://ondemand.riggingdojo.com/products/maya-python-101-course/categories/529289/posts/1714960
https://ondemand.riggingdojo.com/products/maya-python-101-course/categories/529289/posts/1714940

https://docs.python.org/2/tutorial/classes.html

https://www.youtube.com/watch?v=E7voPQQtO6w



Metodo __init__   y __del__
----------------------------
	El metodo __init__ es el constructor en python.
	Cuando instanciamos una clase, lo que esta dentro de __init__ se ejecutya automaticamente.
	
	El metodo __del__ es el opuesto al constructor y es lo que se ejecuta automaticamente cuando se termina de correr el script.

	Ejemplo: En el siguiente ejemplo se ve como en el constructor se intenta crear la tabla si no existe.
	         Esto se ejecutara cada vez que se instancie la clase Database.
	         Una vez que ejecutemos cualquiera de los metodos del backend, python correra el metodo __del__ cerrando la base de datos.

	
    backend.py

	import sqlite3
	class Database:

		def __init__(self, db):
			conn=sqlite3.connect(db)
			self.cur=conn.cursor()
			self.cur.execute("CREATE TABLE IF NOT EXIST book (id INTEGER PRIMARY, Title text)")
			conn.commit()

		def __del__(self):
			self.conn.close()



Herencia
--------

	Para heredar una clase, basta con indicar la herencia al definir la clase.
	En el ejemplo que sigue se muestra como la clase Cuenta hereda de Database.

	class Cuenta(Database):
		xxxx

Uso del init de la clase base
-----------------------------
	Supongamos que tenemos una clase Empleado que recibe nombre, apellido y salario y lo carga en variables de clase en el __init__
	Luego una Developer que hereda de la Empleado y recibe el lenguaje en el que programa para el constructor __init__
	Dado que lo interesante de la herencia es no repetir ademas de sobreescribir, veremos en el ejemplo que sigue, como se puede
	usar el constructor del Developer para una parte y el constructor de la clase base para la otra de los parametros recibidos.

	Esto esta explicado en el video Python OOP Tutorial 4 Inheritance - Creating Subclasses Youtube.mp4

	class Employee():
		
		raise_pay = 1.04
		
		def __init__(self, name, surname, pay):
			self.name = name
			self.surname = surname
			self.email = '{0}.{1}@gmail.com'.format(name, surname)
			self.pay = pay

		def raiseSalary(self):
			self.pay = self.pay * raise_pay

	class Developer(Employee):   	# hereda de Employee

		raise_pay = 1.10

		def __init__(self, name, surname, pay, languaje):
			super().__init__(name, surname, pay)                # Esto pasa las 3 variables al init de Employee
			self.languaje = languaje



Listar Variable Seteada en el modulo riggint_Tools.mod
======================================================
import sys
import os 

for s in sys.path:
	print s
	
print os.environ['RIGGING_TOOL']	

Json
====

Para mejorar la visualizacion de Json en sublime se puede usar la libreria pretty-json
https://blog.adriaan.io/sublime-pretty-json.html

	Shortcut: Ctrl + Alt + j


A continuacion se lista la libreria para grabar y leer json ubicada en system/utils.py


import maya.cmds as cmds
import json as json

def writeJson(fileName, data):
	with open(fileName, 'w') as outFile:
		json.dump(data, outFile)
	file.close(outFile)

def readJson(fileName):
	with open(fileName, 'r') as inFile:
		data = (open(inFile.name, 'r').read())
	return data


Como se usa:
-------------
import maya.cmds as cmds
import os
import system.utils as utils
import json
reload (system.utils)

path = os.environ['RIGGING_TOOL']
pathJson = path + '/layout/'

# Lista
# ------
ik_Jnt_Lst = [['ik_shoulder_jnt', [0, 0, 0]], 
            ['ik_elbow_jnt', [3, 0, -1]], 
            ['ik_wrist_jnt', [6, 0, 0]], 
            ['ik_wristEnd_jnt', [8, 0, 0]] ]

# Graba
utils.writeJson(pathJson + 'lista.json', armIKCtrl) 
       
# Lee
ik_Jnt_Lst_De_Json = utils.readJson(pathJson + 'lista.json')
print 'Lista: ' + str(ik_Jnt_Lst_De_Json)

            
# Diccionario
# -----------
armIKCtrl = {}          
                       # offsetGrp_name, Ctrl_name, Ctrl_normal, Ctrl_radius, Ctrl_position, Ctrl_rotation
armIKCtrl['ikh_arm'] = [ik_Jnt_Lst[0][0], ik_Jnt_Lst[2][0], 'ikh_arm', 'ikRPsolver', 2, 1] 

# Graba
utils.writeJson(pathJson + 'diccionario.json', armIKCtrl)

# Lee
armIKCtrl_De_Json = utils.readJson(pathJson + 'diccionario.json')

# Convierte a diccionario (json.loads)
armIKCtrl_Nuevo = {}
armIKCtrl_Nuevo = json.loads(armIKCtrl_De_Json)

print 'Complete Diccionary: ' + str(armIKCtrl_Nuevo)

for key, value in armIKCtrl_Nuevo.iteritems():
	print 'Key: ' + str(key), 'Values: ' + str(value)
	
print armIKCtrl['ikh_arm'][2]	
	
	
# Archivo que genera el Json base para el rig del brazo
# -----------------------------------------------------
	C:\RDojo_Python101\Repo\rig\rig_arm_JsonSetup.py

	Este archivo contiene la definicion del diccionario que necesita C:\RDojo_Python101\Repo\rig\rig_arm.py para ejecutarse.
	El diccionario que genera rig_arm_JsonSetup.py se guarda en C:\RDojo_Python101\Repo\layout\arm_Definition.json

	Lo primero que hace C:\RDojo_Python101\Repo\rig\rig_arm.py es leer ese .json y desempaquetar el diccionario.

	






